drop database integrationweb;
Create database integrationweb;

use integrationweb;

Create table cours (
id int auto_increment,
libelle varchar(256) not null unique, 
codeBaps varchar(256),
primary key (id) 
)
ENGINE=InnoDB;

create table codeBaps ( 
id int auto_increment, 
libelleCodeBaps varchar(256) not null unique, 
libelleCours varchar(256), 
codeRayhane varchar(256),
primary key (id)
) 
ENGINE=InnoDB;

create table codeRayhane (
id int auto_increment,
codeRayhane varchar(256) not null unique,
codeBaps varchar(256),
primary key (id)
)
ENGINE = INNODB;

Create table stockerPageDeGarde (
id int auto_increment, 
emplacement varchar(256) not null, 
libelle varchar(256) not null unique, 
dateInjection timestamp not null default current_timestamp,
derniereModification timestamp not null default current_timestamp on update current_timestamp, 
primary key(id)
) 
ENGINE = InnoDb;


Create table supportCoursGen ( 
id int auto_increment, 
dateGeneration timestamp not null default current_timestamp,
emplacement varchar(256) not null, 
derniereModification timestamp not null default current_timestamp on update current_timestamp,  
libelle varchar(256) not null unique, 
supportCoursSource varchar(256), 
slide varchar(256),
codeBaps varchar(256),
codeRayhane varchar(256),
primary key (id)
)
ENGINE=InnoDB;

create table supportCoursSource (
id int auto_increment, 
dateInjection timestamp not null default current_timestamp,
emplacement varchar(256) not null,
derniereModification timestamp not null default current_timestamp on update current_timestamp,  
libelle varchar(256) not null unique, 
codeBaps varchar(256),
codeRayhane varchar(256), 
slide varchar(256), 
supportCoursGen varchar(256), 
primary key (id) 
) 
ENGINE=InnoDB;

create table slideZip ( 
id int auto_increment, 
dateInjection timestamp not null default current_timestamp,
emplacementFichier varchar(256) not null, 
dateDerniereModification timestamp not null default current_timestamp on update current_timestamp, 
libelle varchar(256) not null unique,
supportCoursSource varchar(256), 
supportCoursGen varchar(256), 
codeBaps varchar(256),
codeRayhane varchar(256), 
primary key (id)
)
ENGINE=InnoDB;

create table lierSlideToJpg(
idSlideZip int, 
idSlideJpg int,
primary key (idSlideZip, idSlideJpg)
)
ENGINE = InnoDB;

create table slideJpg (
id int auto_increment, 
dateInjection timestamp not null default current_timestamp, 
dateDerniereModification timestamp not null default current_timestamp on update current_timestamp,
emplacement varchar(256) not null,
primary key (id)
)
ENGINE = InnoDB; 


alter table lierSlideToJpg
add constraint fk_lierSlideToJpg_idSlideZip foreign key (idSlideZip) references slideZip(id);

alter table lierSlideToJpg
add constraint fk_lierSlideToJpg_idSlideJpg foreign key (idSlideJpg) references slideJpg(id);



alter table cours 
add constraint fk_cours_codeBaps foreign key(codeBaps) references codeBaps(libelleCodeBaps);




alter table codeBaps 
add constraint fk_codeBaps_cours foreign key(libelleCours) references cours(libelle);

alter table codeBaps 
add constraint fk_codeBaps_codeRayhane foreign key(codeRayhane) references codeRayhane(codeRayhane);





alter table codeRayhane 
add constraint fk_codeRayhane_codeBaps foreign key(codeBaps) references codeBaps(libelleCodeBaps);




ALTER TABLE supportCoursGen 
ADD CONSTRAINT fk_supportCoursGen_supCoursSource FOREIGN KEY (supportCoursSource)
REFERENCES supportCoursSource(libelle);

ALTER TABLE supportCoursGen
ADD CONSTRAINT fk_supportCoursGen_codeBaps FOREIGN KEY (codeBaps) REFERENCES codeBaps (libelleCodeBaps); 

ALTER TABLE supportCoursGen
ADD CONSTRAINT fk_supportCoursGen_codeRayhane FOREIGN KEY (codeRayhane) REFERENCES codeRayhane (codeRayhane); 


ALTER TABLE supportCoursGen
ADD CONSTRAINT fk_supportCoursGen_slide FOREIGN KEY (slide) REFERENCES slideZip (libelle); 




ALTER TABLE supportCoursSource 
ADD CONSTRAINT fk_supportCoursSource_supCoursGen FOREIGN KEY (supportCoursGen)
REFERENCES supportCoursGen(libelle);

ALTER TABLE supportCoursSource
ADD CONSTRAINT fk_supportCoursSource_codeBaps FOREIGN KEY (codeBaps) REFERENCES codeBaps (libelleCodeBaps); 

ALTER TABLE supportCoursSource
ADD CONSTRAINT fk_supportCoursSource_codeRayhane FOREIGN KEY (codeRayhane) REFERENCES codeRayhane (codeRayhane); 

ALTER TABLE supportCoursSource
ADD CONSTRAINT fk_supportCoursSource_slide FOREIGN KEY (slide) REFERENCES slideZip (libelle); 




alter table slideZip 
add constraint fk_slideZip_supportCoursSource foreign key (supportCoursSource) references supportCoursSource(libelle);

alter table slideZip 
add constraint fk_slideZip_supportCoursGen foreign key (supportCoursGen) references supportCoursGen(libelle);


alter table slideZip
add constraint fk_slideZip_codeBaps foreign key (codeBaps) references codeBaps(libelleCodeBaps);

alter table slideZip
add constraint fk_slideZip_codeRayhane foreign key (codeRayhane) references codeRayhane(codeRayhane);











  



